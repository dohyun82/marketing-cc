# 복권 긁기 게임 개발 태스크 분석서

**프로젝트**: 마케팅 지원 룰렛 이벤트 시스템  
**담당자**: 김도현 (프론트엔드)  
**문서 버전**: v1.0  
**작성일**: 2025-09-05  
**상태**: 계획 완료, 구현 대기

---

## 📋 목차

1. [프로젝트 개요](#프로젝트-개요)
2. [Epic 구조](#epic-구조)
3. [Phase별 개발 계획](#phase별-개발-계획)
4. [우선순위 매트릭스](#우선순위-매트릭스)
5. [리소스 및 일정](#리소스-및-일정)
6. [위험 요소 분석](#위험-요소-분석)
7. [성공 기준](#성공-기준)

---

## 프로젝트 개요

### 🎯 목표
마케팅팀이 자율적으로 운영 가능한 Canvas 기반 복권 긁기 게임 개발

### 📊 범위
- **포함**: 복권 긁기 게임, 앱-웹 브릿지 통신, S3 배포 시스템
- **제외**: 카드 선택 게임, 백엔드 API, VONE 관리자 시스템

### 🎨 핵심 기술
- HTML5 Canvas API
- Touch Events & Mobile Optimization  
- App-Web Bridge Communication
- AWS S3 Static Hosting

---

## Epic 구조

### 📊 Task Hierarchy

```
Epic: 복권 긁기 게임 시스템
├── Story 1: 개발 환경 구축
│   ├── Task 1.1: 프로젝트 구조 생성
│   ├── Task 1.2: 개발 도구 설정
│   └── Task 1.3: 버전 관리 설정
├── Story 2: 앱-웹 브릿지 Mock 시스템
│   ├── Task 2.1: 브릿지 인터페이스 정의
│   ├── Task 2.2: Mock 구현
│   ├── Task 2.3: 콜백 함수 시스템
│   └── Task 2.4: 테스트 시나리오
├── Story 3: Canvas 복권 게임 구현
│   ├── Task 3.1: Canvas 기본 설정
│   ├── Task 3.2: 터치 인터랙션
│   ├── Task 3.3: 스크래치 효과
│   ├── Task 3.4: 진행률 계산
│   └── Task 3.5: 게임 완료 처리
├── Story 4: UI/UX 컴포넌트
│   ├── Task 4.1: 로딩 화면
│   ├── Task 4.2: 결과 모달
│   ├── Task 4.3: 에러 처리 UI
│   └── Task 4.4: 반응형 레이아웃
├── Story 5: 성능 최적화
│   ├── Task 5.1: 렌더링 최적화
│   ├── Task 5.2: 메모리 관리
│   ├── Task 5.3: 애니메이션 최적화
│   └── Task 5.4: 디바이스 호환성
├── Story 6: S3 배포 시스템
│   ├── Task 6.1: 번들링 스크립트
│   ├── Task 6.2: S3 업로드 자동화
│   ├── Task 6.3: CloudFront 설정
│   └── Task 6.4: 배포 파이프라인
└── Story 7: 테스트 및 QA
    ├── Task 7.1: 단위 테스트
    ├── Task 7.2: 통합 테스트
    ├── Task 7.3: 디바이스 테스트
    └── Task 7.4: 성능 테스트
```

---

## Phase별 개발 계획

### 🔄 Phase 1: 기반 구축 (3-4일)

#### Story 1: 개발 환경 구축

| Task | 설명 | 예상 시간 | 우선순위 | 의존성 |
|------|------|----------|----------|--------|
| 1.1 | 프로젝트 폴더 구조 생성 | 2시간 | 🔴 Critical | - |
| 1.2 | VS Code Live Server, Chrome DevTools 설정 | 1시간 | 🔴 Critical | Task 1.1 |
| 1.3 | Git 저장소 초기화 및 .gitignore | 1시간 | 🟡 High | Task 1.1 |

**완료 기준:**
- [ ] `src/` 디렉터리 구조 완성
- [ ] 로컬 개발 서버 정상 동작
- [ ] Git 커밋 가능 상태

#### Story 2: 앱-웹 브릿지 Mock 시스템

| Task | 설명 | 예상 시간 | 우선순위 | 의존성 |
|------|------|----------|----------|--------|
| 2.1 | EventBridge 클래스 및 인터페이스 정의 | 4시간 | 🔴 Critical | Task 1.2 |
| 2.2 | MockBridge 클래스 구현 | 6시간 | 🔴 Critical | Task 2.1 |
| 2.3 | 글로벌 콜백 함수 시스템 | 3시간 | 🔴 Critical | Task 2.2 |
| 2.4 | 다양한 시나리오 테스트 케이스 | 3시간 | 🟡 High | Task 2.3 |

**완료 기준:**
- [ ] `window.Android` Mock 정상 동작
- [ ] 성공/실패/재참여 시나리오 테스트 통과
- [ ] 타임아웃 및 에러 처리 검증

---

### 🎮 Phase 2: 핵심 게임 로직 (5-6일)

#### Story 3: Canvas 복권 게임 구현

| Task | 설명 | 예상 시간 | 우선순위 | 의존성 |
|------|------|----------|----------|--------|
| 3.1 | CanvasRenderer, 레티나 디스플레이 대응 | 4시간 | 🔴 Critical | Story 2 완료 |
| 3.2 | TouchHandler, 터치/마우스 이벤트 통합 | 6시간 | 🔴 Critical | Task 3.1 |
| 3.3 | destination-out 스크래치 효과 구현 | 8시간 | 🔴 Critical | Task 3.2 |
| 3.4 | 픽셀 기반 진행률 계산 알고리즘 | 6시간 | 🔴 Critical | Task 3.3 |
| 3.5 | 50% 도달 시 완료 처리 및 결과 요청 | 4시간 | 🔴 Critical | Task 3.4 |

**완료 기준:**
- [ ] 부드러운 스크래치 효과 구현
- [ ] 50% 임계점 정확한 감지
- [ ] 터치 반응성 100ms 이내
- [ ] 자동 완료 애니메이션

#### Story 4: UI/UX 컴포넌트

| Task | 설명 | 예상 시간 | 우선순위 | 의존성 |
|------|------|----------|----------|--------|
| 4.1 | LoadingScreen 컴포넌트 | 3시간 | 🟡 High | Task 2.3 |
| 4.2 | ResultModal, 당첨/꽝 UI 구분 | 5시간 | 🔴 Critical | Task 3.5 |
| 4.3 | ErrorDisplay, 재시도/안내 UI | 4시간 | 🟡 High | Task 2.4 |
| 4.4 | 반응형 CSS, 5.5"~6.7" 화면 대응 | 4시간 | 🟡 High | Story 3 완료 |

**완료 기준:**
- [ ] 모든 상태의 UI 정상 표시
- [ ] 모바일 화면 크기 완전 대응
- [ ] 접근성 기본 요구사항 충족

---

### ⚡ Phase 3: 성능 및 배포 (3-4일)

#### Story 5: 성능 최적화

| Task | 설명 | 예상 시간 | 우선순위 | 의존성 |
|------|------|----------|----------|--------|
| 5.1 | requestAnimationFrame 최적화 | 3시간 | 🟡 High | Story 3 완료 |
| 5.2 | 메모리 누수 방지, 이벤트 리스너 정리 | 4시간 | 🟡 High | Story 4 완료 |
| 5.3 | CSS transform GPU 가속 | 2시간 | 🟢 Medium | Task 5.1 |
| 5.4 | iOS/Android 호환성 테스트 | 6시간 | 🔴 Critical | Story 4 완료 |

**완료 기준:**
- [ ] 60fps 안정적 유지
- [ ] 메모리 사용량 50MB 이하
- [ ] iOS 14+, Android 5.0+ 정상 동작

#### Story 6: S3 배포 시스템

| Task | 설명 | 예상 시간 | 우선순위 | 의존성 |
|------|------|----------|----------|--------|
| 6.1 | HTML/CSS/JS 번들링 스크립트 | 6시간 | 🔴 Critical | Story 5 완료 |
| 6.2 | AWS S3 업로드 자동화 | 4시간 | 🔴 Critical | Task 6.1 |
| 6.3 | CloudFront CDN 설정 | 3시간 | 🟡 High | Task 6.2 |
| 6.4 | GitHub Actions 배포 파이프라인 | 5시간 | 🟢 Medium | Task 6.3 |

**완료 기준:**
- [ ] 단일 HTML 파일 200KB 이하
- [ ] 자동 배포 스크립트 정상 동작
- [ ] CDN 캐시 정책 최적화

---

### 🧪 Phase 4: 테스트 및 검증 (2-3일)

#### Story 7: 테스트 및 QA

| Task | 설명 | 예상 시간 | 우선순위 | 의존성 |
|------|------|----------|----------|--------|
| 7.1 | 브릿지 통신 단위 테스트 | 4시간 | 🔴 Critical | Story 2 완료 |
| 7.2 | 게임 로직 통합 테스트 | 5시간 | 🔴 Critical | Story 3 완료 |
| 7.3 | 실제 디바이스 테스트 매트릭스 | 8시간 | 🔴 Critical | Story 6 완료 |
| 7.4 | 성능 벤치마크 및 최적화 | 4시간 | 🟡 High | Story 5 완료 |

**완료 기준:**
- [ ] 모든 시나리오 테스트 통과
- [ ] 5개 이상 실제 디바이스 검증
- [ ] 성능 목표치 달성

---

## 우선순위 매트릭스

### 🎯 중요도 vs 긴급도

```
긴급도 높음                    긴급도 낮음
┌─────────────────────────┬─────────────────────────┐
│ 🔴 DO FIRST            │ 🟡 SCHEDULE            │
│ (중요도 높음, 긴급도 높음) │ (중요도 높음, 긴급도 낮음) │
│                         │                         │
│ • 개발 환경 구축         │ • 성능 최적화           │
│ • 브릿지 Mock 시스템     │ • UI/UX 개선           │
│ • Canvas 게임 핵심 로직  │ • 에러 처리 강화        │
│ • 결과 모달 구현         │ • CloudFront 설정       │
│ • 실제 디바이스 테스트   │ • 자동화 파이프라인     │
├─────────────────────────┼─────────────────────────┤
│ 🟢 DELEGATE            │ ⚪ ELIMINATE           │
│ (중요도 낮음, 긴급도 높음) │ (중요도 낮음, 긴급도 낮음) │
│                         │                         │
│ • 문서화                │ • 고급 애니메이션       │
│ • 코드 리팩토링         │ • A/B 테스트 준비       │
│ • 추가 테스트 케이스    │ • 확장 기능 설계        │
└─────────────────────────┴─────────────────────────┘
```

### 📊 Risk vs Impact

| Task | Risk Level | Business Impact | 개발 난이도 | 우선순위 |
|------|------------|-----------------|-------------|----------|
| Canvas 스크래치 구현 | 🔴 High | 🔴 Critical | 🔴 Hard | P0 |
| 앱-웹 브릿지 통신 | 🟡 Medium | 🔴 Critical | 🟡 Medium | P0 |
| 진행률 계산 알고리즘 | 🔴 High | 🔴 Critical | 🔴 Hard | P0 |
| 터치 이벤트 최적화 | 🟡 Medium | 🔴 Critical | 🟡 Medium | P0 |
| S3 배포 자동화 | 🟢 Low | 🟡 High | 🟢 Easy | P1 |
| UI 컴포넌트 구현 | 🟢 Low | 🟡 High | 🟢 Easy | P1 |
| 성능 최적화 | 🟡 Medium | 🟡 High | 🟡 Medium | P2 |
| 디바이스 호환성 테스트 | 🟡 Medium | 🔴 Critical | 🟡 Medium | P1 |

---

## 리소스 및 일정

### 👥 팀 구성
- **김도현**: 프론트엔드 개발 (100% 할당)
- **지예인**: 기획 검토 및 피드백 (20% 할당)
- **정보근**: 기술 검토 및 승인 (10% 할당)

### 📅 일정 계획

```gantt
title 복권 긁기 게임 개발 일정
dateFormat  YYYY-MM-DD
section Phase 1
개발 환경 구축         :p1, 2025-09-06, 1d
브릿지 Mock 시스템     :p2, after p1, 2d
section Phase 2  
Canvas 게임 구현       :p3, after p2, 3d
UI 컴포넌트           :p4, after p3, 2d
section Phase 3
성능 최적화           :p5, after p4, 2d
S3 배포 시스템        :p6, after p4, 2d
section Phase 4
테스트 및 QA          :p7, after p5, 2d
```

### ⏰ 세부 일정표

| Week | 월 | 화 | 수 | 목 | 금 | 주말 |
|------|----|----|----|----|----|----|
| **Week 1** | 개발환경 + Mock시작 | Mock 시스템 완료 | Canvas 기본 구현 | 터치 이벤트 | 스크래치 효과 | 진행률 계산 |
| **Week 2** | 게임 완료 처리 | UI 컴포넌트 | 성능 최적화 | S3 배포 시스템 | 테스트 및 QA | 최종 검증 |

### 💰 리소스 예상

| 항목 | 시간 (시간) | 비율 |
|------|-------------|------|
| **핵심 개발** | 64시간 | 70% |
| - Canvas 게임 로직 | 28시간 | 30% |
| - 브릿지 통신 | 16시간 | 18% |
| - UI/UX 컴포넌트 | 16시간 | 18% |
| - 테스트 및 QA | 21시간 | 23% |
| **인프라 및 배포** | 18시간 | 20% |
| **문서화 및 기타** | 9시간 | 10% |
| **총 예상 시간** | **91시간** | **100%** |

---

## 위험 요소 분석

### 🚨 High Risk Items

#### 1. Canvas 터치 성능 이슈
- **위험도**: 🔴 High
- **영향도**: Critical (사용자 경험 직결)
- **완화 방안**:
  - requestAnimationFrame 적용
  - 터치 이벤트 디바운싱
  - 실제 디바이스 조기 테스트

#### 2. iOS/Android 호환성 문제
- **위험도**: 🟡 Medium
- **영향도**: Critical (플랫폼별 동작 차이)
- **완화 방안**:
  - 브릿지 Mock 시스템으로 독립 개발
  - 플랫폼별 테스트 매트릭스 구성
  - 폴백 로직 구현

#### 3. 50% 진행률 계산 정확성
- **위험도**: 🟡 Medium  
- **영향도**: High (게임 로직 핵심)
- **완화 방안**:
  - 픽셀 샘플링 알고리즘 최적화
  - 다양한 이미지에서 검증
  - 임계점 조정 가능하도록 설계

### 🟡 Medium Risk Items

#### 4. S3 배포 복잡성
- **위험도**: 🟢 Low
- **영향도**: Medium (배포 효율성)
- **완화 방안**:
  - 단계별 배포 스크립트 작성
  - 수동 배포 가이드 준비
  - 롤백 프로세스 구축

#### 5. 번들 파일 크기 제한
- **위험도**: 🟢 Low
- **영향도**: Medium (로딩 성능)
- **완화 방안**:
  - 이미지 최적화 및 압축
  - 불필요한 코드 제거
  - 점진적 기능 추가

### 🔄 Risk Monitoring

```javascript
// 위험 모니터링 체크리스트
const RISK_CHECKPOINTS = {
  'canvas-performance': {
    metric: 'Touch response time',
    target: '< 100ms',
    checkFrequency: 'daily'
  },
  'device-compatibility': {
    metric: 'Device test pass rate',
    target: '100%',
    checkFrequency: 'weekly'
  },
  'bundle-size': {
    metric: 'File size',
    target: '< 200KB',
    checkFrequency: 'per build'
  }
};
```

---

## 성공 기준

### 🎯 기술적 성공 기준

#### 성능 목표
- [ ] **페이지 로딩**: 3초 이내
- [ ] **터치 반응성**: 100ms 이내  
- [ ] **프레임 레이트**: 60fps 유지
- [ ] **메모리 사용량**: 50MB 이하
- [ ] **번들 크기**: 200KB 이하

#### 기능 완성도
- [ ] **스크래치 게임**: 자연스러운 터치 인터랙션
- [ ] **진행률 감지**: 50% 임계점 정확한 판단
- [ ] **앱 통신**: 모든 시나리오 에러 없이 처리
- [ ] **UI 컴포넌트**: 모바일 최적화 완료
- [ ] **배포 시스템**: 자동화된 S3 배포

#### 호환성 요구사항
- [ ] **iOS**: 14+ Safari, Chrome WebView
- [ ] **Android**: 5.0+ Chrome, Samsung Internet
- [ ] **화면 크기**: 5.5" ~ 6.7" 완전 대응
- [ ] **네트워크**: 3G 환경에서도 정상 동작

### 📊 품질 기준

#### 코드 품질
- [ ] **테스트 커버리지**: 80% 이상
- [ ] **에러 처리**: 모든 예외 상황 대응
- [ ] **문서화**: API 및 구현 가이드 완성
- [ ] **베스트 프랙티스**: ESLint/Prettier 적용

#### 사용자 경험
- [ ] **직관적 조작**: 별도 설명 없이 게임 진행 가능
- [ ] **명확한 피드백**: 모든 상태에 대한 적절한 안내
- [ ] **오류 복구**: 에러 발생시 사용자 친화적 안내
- [ ] **접근성**: 기본 웹 접근성 가이드라인 준수

### 🏆 비즈니스 성공 기준

#### 마케팅팀 만족도
- [ ] **독립 운영**: 개발팀 도움 없이 이벤트 배포 가능
- [ ] **사용 편의성**: 30분 내 새 이벤트 배포 가능  
- [ ] **안정성**: 운영 중 시스템 오류 0건
- [ ] **확장성**: 향후 다른 게임 타입 추가 가능한 구조

#### 사용자 참여도
- [ ] **참여 완료율**: 95% 이상 (시작 → 완료)
- [ ] **오류 발생률**: 1% 미만
- [ ] **재방문율**: 이벤트 당 재접속 시도 5% 미만
- [ ] **플랫폼별 일관성**: iOS/Android 동일한 UX

---

## 📈 프로젝트 추적

### KPI 대시보드

| 구분 | 지표 | 목표 | 현재 | 상태 |
|------|------|------|------|------|
| **진행률** | 전체 태스크 완료 | 100% | 0% | 🔴 시작 전 |
| **품질** | 테스트 통과율 | 100% | - | ⚪ 측정 전 |
| **성능** | 로딩 시간 | < 3초 | - | ⚪ 측정 전 |
| **호환성** | 디바이스 테스트 | 100% | - | ⚪ 측정 전 |

### 📅 마일스톤

| 마일스톤 | 예정일 | 완료 기준 | 상태 |
|----------|--------|-----------|------|
| **M1: 개발 기반 구축** | 2025-09-08 | 환경 구축 + Mock 완료 | ⚪ 대기 |
| **M2: 핵심 게임 완료** | 2025-09-13 | Canvas 게임 + UI 완료 | ⚪ 대기 |
| **M3: 배포 시스템 완료** | 2025-09-16 | S3 배포 자동화 완료 | ⚪ 대기 |
| **M4: 프로젝트 완료** | 2025-09-18 | 모든 테스트 통과 | ⚪ 대기 |

---

## 📚 참고 자료

### 관련 문서
- [PRD: 마케팅 지원 룰렛 이벤트 시스템](../PRD-Marketing-Event-System.md)
- [시스템 아키텍처](../architecture/scratch-game-architecture.md)
- [프론트엔드 구현 가이드](../frontend/implementation-guide.md)
- [앱-웹 브릿지 API 명세](../api/bridge-interface.md)
- [S3 배포 가이드](../deployment/s3-deployment-guide.md)

### 외부 참고 자료
- [HTML5 Canvas API Documentation](https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API)
- [Touch Events Specification](https://w3c.github.io/touch-events/)
- [AWS S3 Static Website Hosting](https://docs.aws.amazon.com/AmazonS3/latest/userguide/WebsiteHosting.html)
- [CloudFront CDN Best Practices](https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/best-practices.html)

---

**문서 히스토리**

| 버전 | 날짜 | 변경사항 | 작성자 |
|------|------|----------|--------|
| v1.0 | 2025-09-05 | 초기 태스크 분석서 작성 | 김도현 |

---

**승인 및 검토**

| 역할 | 이름 | 승인일 | 서명 |
|------|------|--------|------|
| 개발 담당자 | 김도현 | 2025-09-05 | ✅ |
| 기획 담당자 | 지예인 | - | ⚪ 대기 |
| 기술 리드 | 정보근 | - | ⚪ 대기 |